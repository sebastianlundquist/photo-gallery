!function(){var n,e,t,i,o,d,r,p=0,m=0,h=document.getElementById("gallery"),E={userIDs:[],URLs:[],titles:[]};function s(e,t){return e.replace("_n.","_"+t+".")}function g(e){var t=document.getElementById("display-image"),n=document.getElementById("fullscreen-title");t.setAttribute("src",s(E.URLs[e],"h")),""!==E.titles[e]?(t.setAttribute("alt",E.titles[e]),n.innerText=E.titles[e]):(t.setAttribute("alt",""),n.innerText="No title"),document.getElementById("fullscreen-container").style.display="block",document.getElementById("close").focus(),document.getElementById("photo-group").style.display="none"}function y(e){document.getElementById("fullscreen-container").style.display="none",document.getElementById("photo-group").style.display="block",document.getElementById("div"+e).focus()}function f(e){var t=document.getElementById("display-image"),n=document.getElementById("fullscreen-title");1===e&&p<E.URLs.length-1?p++:-1===e&&0<p&&p--,t.setAttribute("src",s(E.URLs[p],"h")),""!==E.titles[p]?(t.setAttribute("alt",E.titles[p]),n.innerText=E.titles[p]):(t.setAttribute("alt",""),n.innerText="No title")}function b(e){var t=document.createElement("div"),n=document.createElement("h1"),i=document.createElement("p");t.setAttribute("id","error-container"),n.setAttribute("id","error-header"),i.setAttribute("id","error-message"),"Response failed."===e[1]?n.innerText=e[1]:(n.innerText=e[0],i.innerText=e[1]),t.appendChild(n),t.appendChild(i),h.appendChild(t)}n=function(e){try{"fail"===e.stat?b([e.code,e.message]):(m=e.photos.photo.length,function(e){var t;for(t=0;t<m;t++)E.URLs.push("https://farm"+e.photos.photo[t].farm+".staticflickr.com/"+e.photos.photo[t].server+"/"+e.photos.photo[t].id+"_"+e.photos.photo[t].secret+"_n.jpg"),E.userIDs.push(e.photos.photo[t].id),E.titles.push(e.photos.photo[t].title)}(e),function(e){var t,n,i,o,d=document.createElement("div");for(d.setAttribute("id","photo-group"),h.appendChild(d),t=0;t<m;t++)n=document.createElement("div"),i=document.createElement("span"),o=document.createElement("a"),n.setAttribute("id","div"+t),n.setAttribute("class","responsive"),n.setAttribute("tabindex","0"),n.setAttribute("style","background-image: url('"+E.URLs[t]+"')"),i.setAttribute("class","grid-title"),o.setAttribute("class","photographer"),o.setAttribute("href","https://www.flickr.com/people/"+e.photos.photo[t].owner),d.appendChild(n),n.appendChild(i),n.appendChild(o),""!==E.titles[t]?i.innerText=E.titles[t]:i.innerText="No title",o.innerText="© user "+e.photos.photo[t].owner}(e),t=document.createElement("div"),n=document.createElement("span"),i=document.createElement("div"),o=document.createElement("div"),d=document.createElement("img"),r=document.createElement("a"),s=document.createElement("span"),l=document.createElement("a"),c=document.createElement("span"),a=document.createElement("div"),u=document.createElement("p"),t.setAttribute("id","fullscreen-container"),n.setAttribute("id","close"),n.setAttribute("tabindex","0"),i.setAttribute("id","fullscreen-content"),o.setAttribute("id","slide"),d.setAttribute("id","display-image"),r.setAttribute("id","previous"),r.setAttribute("tabindex","0"),l.setAttribute("id","next"),l.setAttribute("tabindex","0"),a.setAttribute("id","fullscreen-title-container"),u.setAttribute("id","fullscreen-title"),n.innerText="×",s.innerText="❮",c.innerText="❯",h.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(a),i.appendChild(o),i.appendChild(r),i.appendChild(l),o.appendChild(d),a.appendChild(u),r.appendChild(s),l.appendChild(c),function(){var e,t,n=[];function i(t){document.getElementById("div"+t).addEventListener("click",function(){g(p=t)}),document.getElementById("div"+t).addEventListener("keyup",function(e){"Enter"===e.key&&g(p=t)}),document.getElementsByClassName("photographer")[t].addEventListener("click",function(e){e.stopPropagation()}),document.getElementsByClassName("photographer")[t].addEventListener("keyup",function(e){e.stopPropagation()})}for(e=0;e<m;e++)n[e]=i.bind(this,e);for(t=0;t<m;t++)n[t]();document.getElementById("photo-group").addEventListener("keyup",function(e){"ArrowLeft"===e.key&&0<p&&(p--,document.getElementById("div"+p).focus()),"ArrowRight"===e.key&&p<m-1&&(p++,document.getElementById("div"+p).focus())}),document.getElementById("fullscreen-container").addEventListener("keyup",function(e){"ArrowLeft"===e.key&&f(-1),"ArrowRight"===e.key&&f(1),"Escape"===e.key&&y(p)}),document.getElementById("close").addEventListener("click",function(){y(p)}),document.getElementById("close").addEventListener("keyup",function(e){"Enter"===e.key&&y(p)}),document.getElementById("next").addEventListener("click",function(){f(1)}),document.getElementById("next").addEventListener("keyup",function(e){"Enter"===e.key&&f(1)}),document.getElementById("previous").addEventListener("click",function(){f(-1)}),document.getElementById("previous").addEventListener("keyup",function(e){"Enter"===e.key&&f(-1)})}())}catch(e){console.log(e),b(e)}var t,n,i,o,d,r,s,l,c,a,u},e=h.getAttribute("data-text"),t=h.getAttribute("data-page"),i=h.getAttribute("data-count"),o=h.getAttribute("data-lat"),d=h.getAttribute("data-lon"),(r=new XMLHttpRequest).addEventListener("load",function(e){var t={};try{200!==e.target.status?b([404,"Response failed."]):(t=JSON.parse(e.target.response),n(t))}catch(e){b(e)}}),r.open("GET","https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=91311f10dd01517346db22e505210863&text="+e+"&lat="+o+"&lon="+d+"&radius=32&format=json&per_page="+i+"&nojsoncallback=1&page="+t),r.send()}();