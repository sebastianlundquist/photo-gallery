!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o=0,r=0,i=document.getElementById("gallery"),s={userIDs:[],URLs:[],titles:[]};function d(e,t){return e.replace("_n.","_"+t+".")}function u(e){var t=document.getElementById("display-image"),n=document.getElementById("fullscreen-title");t.setAttribute("src",d(s.URLs[e],"h")),""===s.titles[e]?(t.setAttribute("alt",""),n.innerText="No title"):(t.setAttribute("alt",s.titles[e]),n.innerText=s.titles[e]),document.getElementById("fullscreen-container").style.display="block",document.getElementById("close").focus(),document.getElementById("photo-group").style.display="none"}function c(e){document.getElementById("fullscreen-container").style.display="none",document.getElementById("photo-group").style.display="block",document.getElementById("div"+e).focus()}function l(e){var t=document.getElementById("display-image"),n=document.getElementById("fullscreen-title");1===e&&o<s.URLs.length-1?o++:-1==e&&0<o&&o--,t.setAttribute("src",d(s.URLs[o],"h")),""===s.titles[o]?(t.setAttribute("alt",""),n.innerText="No title"):(t.setAttribute("alt",s.titles[o]),n.innerText=s.titles[o])}function a(e){document.body.classList.remove("🐹"),i.innerHTML+="<div id='error-container'>\n<h1 id='error-header'>"+e[0]+"</h1>\n<p id='error-message'>"+e[1]+"</p>\n</div>"}(function(e,t,n,o,r){return new Promise(function(i,s){var d=new XMLHttpRequest;d.addEventListener("load",function(e){200===e.target.status?i(JSON.parse(e.target.response)):s([404,"Server did not respond."])}),d.open("GET","https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=91311f10dd01517346db22e505210863&text="+e+"&lat="+o+"&lon="+r+"&radius=32&format=json&per_page="+n+"&nojsoncallback=1&page="+t),d.send()})})(i.getAttribute("data-text"),i.getAttribute("data-page"),i.getAttribute("data-count"),i.getAttribute("data-lat"),i.getAttribute("data-lon")).then(function(e){return"fail"===e.stat?void a([e.code,e.message]):(r=e.photos.photo.length,e)},a).then(function(e){for(var t=0;t<r;t++)s.URLs.push("https://farm"+e.photos.photo[t].farm+".staticflickr.com/"+e.photos.photo[t].server+"/"+e.photos.photo[t].id+"_"+e.photos.photo[t].secret+"_n.jpg"),s.userIDs.push(e.photos.photo[t].id),s.titles.push(e.photos.photo[t].title);return e}).then(function(e){for(var t=document.getElementById("photo-group"),n="",o="",i=0;i<r;i++)n=""===s.titles[i]?"No title":s.titles[i],o=e.photos.photo[i].owner,t.innerHTML+="<div id='div"+i+"' class='responsive' tabindex='0' style='background-image: url("+s.URLs[i]+")'>\n<span class='grid-title'>"+n+"</span>\n<a class='photographer' href='https://www.flickr.com/people/"+o+"'>&copy; user "+o+"</a>\n</div>"}).then(function(){for(var e=function(e){document.getElementById("div"+e).addEventListener("click",function(){o=e,u(e)}),document.getElementById("div"+e).addEventListener("keyup",function(t){"Enter"===t.key&&(o=e,u(e))}),document.getElementsByClassName("photographer")[e].addEventListener("click",function(e){e.stopPropagation()}),document.getElementsByClassName("photographer")[e].addEventListener("keyup",function(e){e.stopPropagation()})},t=0;t<r;t++)e(t);document.getElementById("photo-group").addEventListener("keyup",function(e){"ArrowLeft"===e.key&&0<o&&(o--,document.getElementById("div"+o).focus()),"ArrowRight"===e.key&&o<r-1&&(o++,document.getElementById("div"+o).focus())}),document.getElementById("fullscreen-container").addEventListener("keyup",function(e){"ArrowLeft"===e.key&&l(-1),"ArrowRight"===e.key&&l(1),"Escape"===e.key&&c(o)}),document.getElementById("close").addEventListener("click",function(){c(o)}),document.getElementById("close").addEventListener("keyup",function(e){"Enter"===e.key&&c(o)}),document.getElementById("next").addEventListener("click",function(){l(1)}),document.getElementById("next").addEventListener("keyup",function(e){"Enter"===e.key&&l(1)}),document.getElementById("previous").addEventListener("click",function(){l(-1)}),document.getElementById("previous").addEventListener("keyup",function(e){"Enter"===e.key&&l(-1)})})}]);