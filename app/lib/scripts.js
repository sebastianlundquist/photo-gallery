"use strict";(function(){function a(a){for(var b=0;b<k;b++)l.URLs.push("https://farm"+a.photos.photo[b].farm+".staticflickr.com/"+a.photos.photo[b].server+"/"+a.photos.photo[b].id+"_"+a.photos.photo[b].secret+"_n.jpg"),l.userIDs.push(a.photos.photo[b].id),l.titles.push(a.photos.photo[b].title)}function b(a){for(var b=document.getElementById("photo-group"),c="",d="",e=0;e<k;e++)c=""===l.titles[e]?"No title":l.titles[e],d=a.photos.photo[e].owner,b.innerHTML+="<div id='div"+e+"' class='responsive' tabindex='0' style='background-image: url("+l.URLs[e]+")'>\n    <span class='grid-title'>"+c+"</span>\n    <a class='photographer' href='https://www.flickr.com/people/"+d+"'>&copy; user "+d+"</a>\n</div>"}function c(){for(var a=function(a){document.getElementById("div"+a).addEventListener("click",function(){j=a,f(a)}),document.getElementById("div"+a).addEventListener("keyup",function(b){"Enter"===b.key&&(j=a,f(a))}),document.getElementsByClassName("photographer")[a].addEventListener("click",function(a){a.stopPropagation()}),document.getElementsByClassName("photographer")[a].addEventListener("keyup",function(a){a.stopPropagation()})},a=0;b<k;b++)a(a);document.getElementById("photo-group").addEventListener("keyup",function(a){"ArrowLeft"===a.key&&0<j&&(j--,document.getElementById("div"+j).focus()),"ArrowRight"===a.key&&j<k-1&&(j++,document.getElementById("div"+j).focus())}),document.getElementById("fullscreen-container").addEventListener("keyup",function(a){"ArrowLeft"===a.key&&h(-1),"ArrowRight"===a.key&&h(1),"Escape"===a.key&&g(j)}),document.getElementById("close").addEventListener("click",function(){g(j)}),document.getElementById("close").addEventListener("keyup",function(a){"Enter"===a.key&&g(j)}),document.getElementById("next").addEventListener("click",function(){h(1)}),document.getElementById("next").addEventListener("keyup",function(a){"Enter"===a.key&&h(1)}),document.getElementById("previous").addEventListener("click",function(){h(-1)}),document.getElementById("previous").addEventListener("keyup",function(a){"Enter"===a.key&&h(-1)})}function d(a,b){return a.replace("_n.","_"+b+".")}function f(a){var b=document.getElementById("display-image"),c=document.getElementById("fullscreen-title");b.setAttribute("src",d(l.URLs[a],"h")),""===l.titles[a]?(b.setAttribute("alt",""),c.innerText="No title"):(b.setAttribute("alt",l.titles[a]),c.innerText=l.titles[a]),document.getElementById("fullscreen-container").style.display="block",document.getElementById("close").focus(),document.getElementById("photo-group").style.display="none"}function g(a){document.getElementById("fullscreen-container").style.display="none",document.getElementById("photo-group").style.display="block",document.getElementById("div"+a).focus()}function h(a){var b=document.getElementById("display-image"),c=document.getElementById("fullscreen-title");1===a&&j<l.URLs.length-1?j++:-1==a&&0<j&&j--,b.setAttribute("src",d(l.URLs[j],"h")),""===l.titles[j]?(b.setAttribute("alt",""),c.innerText="No title"):(b.setAttribute("alt",l.titles[j]),c.innerText=l.titles[j])}function i(a){document.body.classList.remove("\uD83D\uDC39"),e.innerHTML+="<div id='error-container'>\n    <h1 id='error-header'>"+a[0]+"</h1>\n    <p id='error-message'>"+a[1]+"</p>\n</div>"}var j=0,k=0,e=document.getElementById("gallery"),l={userIDs:[],URLs:[],titles:[]};(function(a,b,c,d,e,f){var g=new XMLHttpRequest;g.addEventListener("load",function(b){var c={};200===b.target.status?(c=JSON.parse(b.target.response),a(c)):i([404,"Server did not respond."])}),g.open("GET","https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=91311f10dd01517346db22e505210863&text="+b+"&lat="+e+"&lon="+f+"&radius=32&format=json&per_page="+d+"&nojsoncallback=1&page="+c),g.send()})(function(d){"fail"===d.stat?i([d.code,d.message]):(k=d.photos.photo.length,a(d),b(d),c())},e.getAttribute("data-text"),e.getAttribute("data-page"),e.getAttribute("data-count"),e.getAttribute("data-lat"),e.getAttribute("data-lon"))})();